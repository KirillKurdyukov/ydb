# Использование Dapper

Dapper - это микро ORM (Object Relational Mapping), который предоставляет простой и гибкий способ для взаимодействия с
базами данных. Он работает на основе стандарта ADO.NET и предлагает множество функций, которые облегчают работу с базой
данных.

## ADO.NET

ADO.NET — это набор классов, предоставляющих доступ к данным для разработчиков, использующих платформу .NET Framework.

YDB SDK C# поставляет набор классов реализующих стандарт ADO.NET.

### Создание подключения

Подключение к YDB устанавливается через YdbConnection.

1.  **Использование конструктора без параметров**:

    Следующий код создаёт подключение с настройками по умолчанию:
    
    ```c#
    await using var ydbConnection = new YdbConnection();
    ```
    
    Этот вариант создаёт подключение к базе данных по URL: `grpc://localhost:2136/local`, с анонимной аутентификацией.

2. **Использование конструктора со строкой подключения**:

    В следующем примере происходит создание подключения при помощи строки подключения:
    
    ```C#
    await using var ydbConnection = new YdbConnection(
       "Host=database-sample-grpc;Port=2135;Database=/root/database-sample");
    ```
    
    В данном случае подключение будет установлено по URL: `grpc://database-sample-grpc:2135/root/database-sample`. При использовании метода со строкой подключения параметры задаются в виде пар ключ=значение, разделённые точкой с запятой (`key1=value1;key2=value2`). Набор ключей имеет фиксированные значения, которые будут детально рассмотрены в следующих разделах.

3. **Использование конструктора с аргументом `YdbConnectionStringBuilder`**:

    Вариант с использованием `YdbConnectionStringBuilder` демонстрируется в коде ниже:

    ```c#
    new YdbConnectionStringBuilder
    {
        Host = "server",
        Port = 2135,
        Database = "/ru-prestable/my-table",
        UseTls = true
    };
    ```
   
### Параметры подключения

Все доступные параметры подключения определены как `property` в классе `YdbConnectionStringBuilder`.

Вот список параметров, которые можно задать в строке подключения `ConnectionString`:

| Параметр          | Описание                                                                                           | Значение по умолчанию |
|-------------------|----------------------------------------------------------------------------------------------------|-----------------------|
| `Host`            | Указывает хост сервера                                                                             | `localhost`           |
| `Port`            | Определяет порт сервера                                                                            | `2136`                |
| `Database`        | Задаёт путь к базе данных, с которой будет происходить взаимодействие                              | `/local`              |
| `User`            | Значение задаёт имя пользователя                                                                   | Не определено         |
| `Password`        | Данный параметр задаёт пароль пользователя                                                         | Не определено         |
| `UseTls`          | Определяет, следует ли использовать протокол TLS (`grpc` или `grpcs`)                              | `false`               |
| `MaxSessionPool`  | Максимальное количество размер пула сессий                                                         | `100`                 |
| `RootCertificate` | Задаёт путь к доверенному сертификату сервера. Если этот параметр установлен, то UseTls будет true | Не определено         |

Существуют также и дополнительные параметры, которые не участвуют при формировании строки `ConnectionString`:

| Параметр               | Описание                                                       | Значение по умолчанию |
|------------------------|----------------------------------------------------------------|-----------------------|
| `LoggerFactory`        | Этот параметр служит фабрикой для создания классов логирования | Не определено         |
| `ICredentialsProvider` | Аутентифицирует пользователя, используя внешний IAM-провайдер  | Не определено         |
